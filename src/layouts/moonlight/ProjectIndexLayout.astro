---
import type { MarkdownInstance } from 'astro';
import type { CollectionEntry } from 'astro:content';
import MarkdownContent from '../../components/content/MarkdownContent.astro';
import ProjectIndexItem from '../../components/moonlight/ProjectIndexItem.astro';
import type { MoonlightCollection } from '../../lib/moonlight/config';
import type { LinkT } from '../../lib/types';
import PageLayout from '../site/PageLayout.astro';

interface Props {
  readonly pageTitle: string;
  readonly content: MarkdownInstance<Record<string, unknown>> | undefined;
  readonly indexEntries: Array<CollectionEntry<MoonlightCollection>>;
  readonly breadcrumbs?: ReadonlyArray<LinkT> | undefined;
  readonly titleIconName?: string;
  readonly itemIconName?: string;
}

const { pageTitle, content, breadcrumbs, indexEntries, titleIconName, itemIconName } = Astro.props;
---

<PageLayout pageTitle={pageTitle} breadcrumbs={breadcrumbs} titleIconName={titleIconName}>
  <MarkdownContent markdownInstance={content} />
  <nav class="my-6 md:my-16 not-prose">
    {indexEntries.map((entry) => <ProjectIndexItem item={entry} itemIconName={itemIconName} />)}
  </nav>
</PageLayout>
