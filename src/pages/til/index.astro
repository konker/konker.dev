---
import { getCollection } from 'astro:content';
import BlogIndexLayout from '../../layouts/blog/BlogIndexLayout.astro';
import { HomeBreadcrumb } from '../../lib';
import type { TagCollection } from '../../lib/collections';
import type { LinkT } from '../../lib/types';
import '../../styles/global.css';

// --------------------------------------------------------------------------
const collection: TagCollection = 'til';
const allPosts = await getCollection(collection);
const filteredPosts = allPosts.filter((post) => !post.data.draft);

// --------------------------------------------------------------------------
const pageTitle = 'TIL';
const intro = 'This is a collection of my "Today I Learned" posts.';

// --------------------------------------------------------------------------
const thisBreadcrumb: LinkT = { title: pageTitle, url: `/${collection}/` };
const breadcrumbs: ReadonlyArray<LinkT> = [HomeBreadcrumb, thisBreadcrumb];
---

<BlogIndexLayout
  pageTitle={pageTitle}
  breadcrumbs={breadcrumbs}
  intro={intro}
  collection={collection}
  posts={filteredPosts}
  titleIconName="blog"
  itemIconName="blog"
/>
